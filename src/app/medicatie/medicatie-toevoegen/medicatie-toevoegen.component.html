

<ng-template #content let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="container">
    <div class="row">
      <div class="col">
        <form [formGroup]="medicatieForm">
          <h5 style="margin-top:20px;">Medicatie:</h5>
          <div class="mb-3">
            <input type="hidden" formControlName="patientId" [ngModel]="patientId">
          </div>

          <div class="form-outline mb-4">
            <label class="form-label" formControlName="datum">Datum:</label>
            <input type="date" for="datum" class="form-control" formControlName="datum">
          </div>

          <div class="form-outline mb-4">
            <label class="form-label" formControlName="beschrijving">Beschrijving:</label>
            <input type="text" for="beschrijving" class="form-control" formControlName="beschrijving">
          </div>

          <div class="form-outline mb-4">
            <label class="form-label">BP code:</label>
            <app-search-bpcode (searchTextChanged)="onSearchTextChanged($event)"></app-search-bpcode>
            <div style="overflow-y: scroll; height:400px; width: auto">
              <ng-container *ngFor="let medication of medications; let i = index;">
                <div *ngIf="searchText === '' || medication.bpNaam.toLowerCase().includes(searchText)">
                  <ul class="list-group">
                    <li class="list-group-item list-group-item-action" [class.active]="active === i"
                        (click)="onClick(i, medication.id)" [value]="medication.id"> {{medication.bpNaam }} </li>
                  </ul>
                </div>
              </ng-container>
            </div>
          </div>
        </form>

        <button type="submit" class="btn btn-primary btn-block mb-4" (click)="submitForm()">Register Medication
        </button>
      </div>
    </div>
  </div>
</ng-template>

<div class="mb-2">
  <button class="btn btn-primary btn-block mb-4" (click)="open(content)"><i class="fa fa-fw fa-plus"></i> Voeg Medicatie toe </button>
</div>
